<!DOCTYPE html>
<html>
  <head>
    <title>Functions and automation   ðŸ¤–</title>
    <meta charset="utf-8">
    <meta name="author" content="" />
    <link href="libs/font-awesome/css/fa-svg-with-js.css" rel="stylesheet" />
    <script src="libs/font-awesome/js/fontawesome-all.min.js"></script>
    <script src="libs/font-awesome/js/fa-v4-shims.min.js"></script>
    <link rel="stylesheet" href="../slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Functions and automation <br> ðŸ¤–

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
Dr. Mine Ã‡etinkaya-Rundel -
&lt;a href="http://www2.stat.duke.edu/courses/Fall18/sta112.01/schedule" target="_blank"&gt;stat.duke.edu/courses/Fall18/sta112.01
&lt;/a&gt;
&lt;/span&gt;
&lt;/div&gt; 

---



class: center, middle

# Functions

---

## Setup


```r
library(tidyverse)
library(rvest)

st &lt;- read_html("http://www.imdb.com/title/tt4574334/")
twd &lt;- read_html("http://www.imdb.com/title/tt1520211/")
got &lt;- read_html("http://www.imdb.com/title/tt0944947/")
```


---

## Why functions?

- Automate common tasks in a powerful and general way than copy-and-pasting:
    - You can give a function an evocative name that makes your code easier to understand.
    - As requirements change, you only need to update code in one place, instead of many.
    - You eliminate the chance of making incidental mistakes when you copy and paste (i.e. updating a variable name in one place, but not in another).

--

- Down the line: Improve your reach as a data scientist by writing functions (and packages!) that others use

---

## When should you write a function?

Whenever youâ€™ve copied and pasted a block of code more than twice.

&lt;br&gt;

--

.question[
Do you see any problems in the code below?
]

.midi[

```r
st_episodes &lt;- st %&gt;%
  html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
  html_text() %&gt;%
  str_replace(" episodes", "") %&gt;%
  as.numeric()

got_episodes &lt;- got %&gt;%
  html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
  html_text() %&gt;%
  str_replace(" episodes", "") %&gt;%
  as.numeric()

twd_episodes &lt;- got %&gt;%
  html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
  html_text() %&gt;%
  str_replace(" episodes", "") %&gt;%
  as.numeric()
```
]

---

## Inputs

.question[
How many inputs does the following code have?
]


```r
st_episodes &lt;- st %&gt;%
  html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
  html_text() %&gt;%
  str_replace(" episodes", "") %&gt;%
  as.numeric()
```

---

## Turn your code into a function

- Pick a short but informative **name**, preferably a verb.

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


```r
scrape_episodes &lt;- 
```

---

## Turn your code into a function

- Pick a short but informative **name**, preferably a verb.
- List inputs, or **arguments**, to the function inside `function`. If we had more the call would look like `function(x, y, z)`.

&lt;br&gt;
&lt;br&gt;


```r
scrape_episodes &lt;- function(x){
  
  
  
  
  
}  
```

---

## Turn your code into a function

- Pick a short but informative **name**, preferably a verb.
- List inputs, or **arguments**, to the function inside `function`. If we had more the call would look like `function(x, y, z)`.
- Place the **code** you have developed in body of the function, a `{` block that immediately follows `function(...)`.


```r
scrape_episodes &lt;- function(x){
  x %&gt;%
    html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
    html_text() %&gt;%
    str_replace(" episodes", "") %&gt;%
    as.numeric()
}
```

--


```r
scrape_episodes(st)
```

```
## [1] 25
```

---

## Check your function

&lt;img src="img/episode_twd.png" width="541" height="120" /&gt;


```r
scrape_episodes(twd)
```

```
## [1] 131
```

&lt;img src="img/episode_got.png" width="543" height="120" /&gt;


```r
scrape_episodes(got)
```

```
## [1] 73
```

---

## Naming functions

&gt; "There are only two hard things in Computer Science: cache invalidation and naming things." - Phil Karlton


--
- Names should be short but clearly evoke what the function does

--
- Names should be verbs, not nouns

--
- Multi-word names should be separated by underscores (`snake_case` as opposed to `camelCase`)

--
- A family of functions should be named similarly (`scrape_title`, `scrape_episode`, `scrape_genre`, etc.)

--
- Avoid overwriting existing (especially widely used) functions

---

.small[

```r
scrape_show_info &lt;- function(x){
  
  title &lt;- x %&gt;%
    html_node("#title-overview-widget h1") %&gt;%
    html_text() %&gt;%
    str_trim()
  
  genres &lt;- x %&gt;%
    html_nodes(".see-more.canwrap~ .canwrap a") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
  runtime &lt;- x %&gt;%
    html_node("time") %&gt;%
    html_text() %&gt;%
    str_replace("\\n", "") %&gt;%
    str_trim()
  
  episodes &lt;- x %&gt;%
    html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
    html_text() %&gt;%
    str_replace(" episodes", "") %&gt;%
    as.numeric()
    
  keywords &lt;- x %&gt;%
    html_nodes(".itemprop") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
  tibble(title = title, runtime = runtime, genres = genres,
         episodes = episodes, keywords = keywords)
  
}
```
]

---

.midi[

```r
scrape_show_info(st) %&gt;% glimpse()
```

```
## Observations: 1
## Variables: 5
## $ title    &lt;chr&gt; "Stranger Things"
## $ runtime  &lt;chr&gt; "51min"
## $ genres   &lt;chr&gt; "Drama, Fantasy, Horror, Mystery, Sci-Fi, Thriller"
## $ episodes &lt;dbl&gt; 25
## $ keywords &lt;chr&gt; "government conspiracy, mk ultra, cover up, monster, ...
```

```r
scrape_show_info(twd) %&gt;% glimpse()
```

```
## Observations: 1
## Variables: 5
## $ title    &lt;chr&gt; "The Walking Dead"
## $ runtime  &lt;chr&gt; "44min"
## $ genres   &lt;chr&gt; "Drama, Horror, Sci-Fi, Thriller"
## $ episodes &lt;dbl&gt; 131
## $ keywords &lt;chr&gt; "zombie, survival, post apocalypse, based on comic, z...
```

```r
scrape_show_info(got) %&gt;% glimpse()
```

```
## Observations: 1
## Variables: 5
## $ title    &lt;chr&gt; "Game of Thrones"
## $ runtime  &lt;chr&gt; "57min"
## $ genres   &lt;chr&gt; "Action, Adventure, Drama, Fantasy, Romance"
## $ episodes &lt;dbl&gt; 73
## $ keywords &lt;chr&gt; "dragon, based on novel, bloody violence, twins inces...
```
]
---

.question[
How would you update the following function to use the URL of the page as an argument?
]

.xsmall[

```r
scrape_show_info &lt;- function(x){

  title &lt;- x %&gt;%
    html_node("#title-overview-widget h1") %&gt;%
    html_text() %&gt;%
    str_trim()
  
  genres &lt;- x %&gt;%
    html_nodes(".see-more.canwrap~ .canwrap a") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
  runtime &lt;- x %&gt;%
    html_node("time") %&gt;%
    html_text() %&gt;%
    str_replace("\\n", "") %&gt;%
    str_trim()
  
  episodes &lt;- x %&gt;%
    html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
    html_text() %&gt;%
    str_replace(" episodes", "") %&gt;%
    as.numeric()
    
  keywords &lt;- x %&gt;%
    html_nodes(".itemprop") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
  tibble(title = title, runtime = runtime, genres = genres,
         episodes = episodes, keywords = keywords)
  
}
```
]

---

.small[

```r
scrape_show_info &lt;- function(x){
  
* y &lt;- read_html(x)

* title &lt;- y %&gt;%
    html_node("#title-overview-widget h1") %&gt;%
    html_text() %&gt;%
    str_trim()
  
* genres &lt;- y %&gt;%
    html_nodes(".see-more.canwrap~ .canwrap a") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
* runtime &lt;- y %&gt;%
    html_node("time") %&gt;%
    html_text() %&gt;%
    str_replace("\\n", "") %&gt;%
    str_trim()
  
* episodes &lt;- y %&gt;%
    html_nodes(".np_right_arrow .bp_sub_heading") %&gt;%
    html_text() %&gt;%
    str_replace(" episodes", "") %&gt;%
    as.numeric()
    
* keywords &lt;- y %&gt;%
    html_nodes(".itemprop") %&gt;%
    html_text() %&gt;%
    str_trim() %&gt;%
    paste(collapse = ", ")
  
  tibble(title = title, runtime = runtime, genres = genres,
         episodes = episodes, keywords = keywords)
  
}
```
]

---

## Let's check

.small[

```r
st_url &lt;- "http://www.imdb.com/title/tt4574334/"
twd_url &lt;- "http://www.imdb.com/title/tt1520211/"
got_url &lt;- "http://www.imdb.com/title/tt0944947/"
```
]
--
.small[

```r
scrape_show_info(st_url)
```

```
## # A tibble: 1 x 5
##   title     runtime genres               episodes keywords                
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;                   
## 1 Strangerâ€¦ 51min   Drama, Fantasy, Horâ€¦       25 government conspiracy, â€¦
```

```r
scrape_show_info(twd_url)
```

```
## # A tibble: 1 x 5
##   title     runtime genres          episodes keywords                     
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;                        
## 1 The Walkâ€¦ 44min   Drama, Horror,â€¦      131 zombie, survival, post apocaâ€¦
```

```r
scrape_show_info(got_url)
```

```
## # A tibble: 1 x 5
##   title     runtime genres             episodes keywords                  
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;                     
## 1 Game of â€¦ 57min   Action, Adventureâ€¦       73 dragon, based on novel, bâ€¦
```
]

---

class: center, middle

# Automation

---

.question[
You now have a function that will scrape the relevant info on shows given its URL. Where can we get a list of URLs of top 100 most popular TV shows on IMDB? Write the code for doing this in your teams.
]

---


```r
urls &lt;- read_html("http://www.imdb.com/chart/tvmeter") %&gt;%
  html_nodes(".titleColumn a") %&gt;%
  html_attr("href") %&gt;%
  paste("http://www.imdb.com", ., sep = "")
```


```
##   [1] "http://www.imdb.com/title/tt1520211/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_1"  
##   [2] "http://www.imdb.com/title/tt6524350/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_2"  
##   [3] "http://www.imdb.com/title/tt1844624/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_3"  
##   [4] "http://www.imdb.com/title/tt7134908/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_4"  
##   [5] "http://www.imdb.com/title/tt0436992/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_5"  
##   [6] "http://www.imdb.com/title/tt3032476/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_6"  
##   [7] "http://www.imdb.com/title/tt0413573/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_7"  
##   [8] "http://www.imdb.com/title/tt3107288/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_8"  
##   [9] "http://www.imdb.com/title/tt5580146/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_9"  
##  [10] "http://www.imdb.com/title/tt1740299/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_10" 
##  [11] "http://www.imdb.com/title/tt0944947/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_11" 
##  [12] "http://www.imdb.com/title/tt1586680/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_12" 
##  [13] "http://www.imdb.com/title/tt0898266/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_13" 
##  [14] "http://www.imdb.com/title/tt1043813/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_14" 
##  [15] "http://www.imdb.com/title/tt6763664/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_15" 
##  [16] "http://www.imdb.com/title/tt1869454/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_16" 
##  [17] "http://www.imdb.com/title/tt5420376/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_17" 
##  [18] "http://www.imdb.com/title/tt8421350/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_18" 
##  [19] "http://www.imdb.com/title/tt5555260/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_19" 
##  [20] "http://www.imdb.com/title/tt5715524/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_20" 
##  [21] "http://www.imdb.com/title/tt0460681/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_21" 
##  [22] "http://www.imdb.com/title/tt5071412/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_22" 
##  [23] "http://www.imdb.com/title/tt6470478/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_23" 
##  [24] "http://www.imdb.com/title/tt4955642/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_24" 
##  [25] "http://www.imdb.com/title/tt7235466/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_25" 
##  [26] "http://www.imdb.com/title/tt2177461/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_26" 
##  [27] "http://www.imdb.com/title/tt2085059/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_27" 
##  [28] "http://www.imdb.com/title/tt0452046/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_28" 
##  [29] "http://www.imdb.com/title/tt5164196/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_29" 
##  [30] "http://www.imdb.com/title/tt3322312/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_30" 
##  [31] "http://www.imdb.com/title/tt0364845/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_31" 
##  [32] "http://www.imdb.com/title/tt5057054/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_32" 
##  [33] "http://www.imdb.com/title/tt2193021/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_33" 
##  [34] "http://www.imdb.com/title/tt5171438/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_34" 
##  [35] "http://www.imdb.com/title/tt2306299/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_35" 
##  [36] "http://www.imdb.com/title/tt3749900/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_36" 
##  [37] "http://www.imdb.com/title/tt4574334/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_37" 
##  [38] "http://www.imdb.com/title/tt2891574/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_38" 
##  [39] "http://www.imdb.com/title/tt0386676/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_39" 
##  [40] "http://www.imdb.com/title/tt7016936/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_40" 
##  [41] "http://www.imdb.com/title/tt7491982/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_41" 
##  [42] "http://www.imdb.com/title/tt4396630/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_42" 
##  [43] "http://www.imdb.com/title/tt1632701/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_43" 
##  [44] "http://www.imdb.com/title/tt7608248/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_44" 
##  [45] "http://www.imdb.com/title/tt7817340/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_45" 
##  [46] "http://www.imdb.com/title/tt7942796/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_46" 
##  [47] "http://www.imdb.com/title/tt2442560/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_47" 
##  [48] "http://www.imdb.com/title/tt0108778/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_48" 
##  [49] "http://www.imdb.com/title/tt0472954/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_49" 
##  [50] "http://www.imdb.com/title/tt0203259/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_50" 
##  [51] "http://www.imdb.com/title/tt2467372/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_51" 
##  [52] "http://www.imdb.com/title/tt1442437/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_52" 
##  [53] "http://www.imdb.com/title/tt6468322/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_53" 
##  [54] "http://www.imdb.com/title/tt0182576/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_54" 
##  [55] "http://www.imdb.com/title/tt0903747/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_55" 
##  [56] "http://www.imdb.com/title/tt5834204/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_56" 
##  [57] "http://www.imdb.com/title/tt2741602/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_57" 
##  [58] "http://www.imdb.com/title/tt3205802/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_58" 
##  [59] "http://www.imdb.com/title/tt1828327/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_59" 
##  [60] "http://www.imdb.com/title/tt3006802/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_60" 
##  [61] "http://www.imdb.com/title/tt3743822/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_61" 
##  [62] "http://www.imdb.com/title/tt5905354/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_62" 
##  [63] "http://www.imdb.com/title/tt7569592/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_63" 
##  [64] "http://www.imdb.com/title/tt2805096/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_64" 
##  [65] "http://www.imdb.com/title/tt2661044/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_65" 
##  [66] "http://www.imdb.com/title/tt6599482/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_66" 
##  [67] "http://www.imdb.com/title/tt4998350/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_67" 
##  [68] "http://www.imdb.com/title/tt2261391/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_68" 
##  [69] "http://www.imdb.com/title/tt6110648/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_69" 
##  [70] "http://www.imdb.com/title/tt4016454/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_70" 
##  [71] "http://www.imdb.com/title/tt6483832/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_71" 
##  [72] "http://www.imdb.com/title/tt1378167/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_72" 
##  [73] "http://www.imdb.com/title/tt6048596/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_73" 
##  [74] "http://www.imdb.com/title/tt2402207/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_74" 
##  [75] "http://www.imdb.com/title/tt0475784/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_75" 
##  [76] "http://www.imdb.com/title/tt4052886/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_76" 
##  [77] "http://www.imdb.com/title/tt6473344/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_77" 
##  [78] "http://www.imdb.com/title/tt2712740/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_78" 
##  [79] "http://www.imdb.com/title/tt1843230/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_79" 
##  [80] "http://www.imdb.com/title/tt5296406/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_80" 
##  [81] "http://www.imdb.com/title/tt3398228/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_81" 
##  [82] "http://www.imdb.com/title/tt3281796/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_82" 
##  [83] "http://www.imdb.com/title/tt2372162/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_83" 
##  [84] "http://www.imdb.com/title/tt7493974/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_84" 
##  [85] "http://www.imdb.com/title/tt6226232/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_85" 
##  [86] "http://www.imdb.com/title/tt1124373/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_86" 
##  [87] "http://www.imdb.com/title/tt3322310/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_87" 
##  [88] "http://www.imdb.com/title/tt1600194/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_88" 
##  [89] "http://www.imdb.com/title/tt6111130/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_89" 
##  [90] "http://www.imdb.com/title/tt2191671/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_90" 
##  [91] "http://www.imdb.com/title/tt6315640/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_91" 
##  [92] "http://www.imdb.com/title/tt0121955/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_92" 
##  [93] "http://www.imdb.com/title/tt7948998/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_93" 
##  [94] "http://www.imdb.com/title/tt6045840/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_94" 
##  [95] "http://www.imdb.com/title/tt7945720/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_95" 
##  [96] "http://www.imdb.com/title/tt7414406/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_96" 
##  [97] "http://www.imdb.com/title/tt1595859/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_97" 
##  [98] "http://www.imdb.com/title/tt2802850/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_98" 
##  [99] "http://www.imdb.com/title/tt6548228/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_99" 
## [100] "http://www.imdb.com/title/tt2356777/?pf_rd_m=A2FGELUUNOQJNL&amp;pf_rd_p=332cb927-0342-42b3-815c-f9124e84021d&amp;pf_rd_r=6925XX8A63DY8PS87BPM&amp;pf_rd_s=center-1&amp;pf_rd_t=15506&amp;pf_rd_i=tvmeter&amp;ref_=chttvm_tt_100"
```

---

## Go to each page, scrape show info 

Now we need a way to programatically direct R to each page on the `urls` list and run the `scrape_show_info` function on that page.

.midi[

```r
scrape_show_info(urls[1])
```

```
## # A tibble: 1 x 5
##   title     runtime genres          episodes keywords                     
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;                        
## 1 The Walkâ€¦ 44min   Drama, Horror,â€¦      131 zombie, survival, post apocaâ€¦
```

```r
scrape_show_info(urls[2])
```

```
## # A tibble: 1 x 5
##   title   runtime genres         episodes keywords                        
##   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                           
## 1 Big Moâ€¦ 30min   Animation, Coâ€¦       20 sexual humor, adolescent humor,â€¦
```

```r
scrape_show_info(urls[3])
```

```
## # A tibble: 1 x 5
##   title        runtime genres         episodes keywords                   
##   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                      
## 1 American Hoâ€¦ 1h      Drama, Horrorâ€¦       98 anthology, serial killer, â€¦
```
]

---

class: center, middle

.large[
*uh oh, we're repeating our~~selves~~ code again*
]

---

## Automation

- We need a way to programmatically repeat the code
- We have two options for doing this:
  - using a `for` loop
  - `map`ping with functional programming

---

## `for` loops

- `for` loops are the simplest and most common type of loop in R 
- Given a vector iterate through the elements and evaluate the code block for each

&lt;br&gt;

**Goal:** Scrape info from individual pages of TV shows using iteration with 
for loops. To keep things simple while developing the code, narrow down focus 
to the first `n = 5` shows only.

---

## `for` loop: 

### (1) Set up a tibble to store results


```r
n &lt;- 5
top_n_shows &lt;- tibble(title = rep(NA,n), runtime = rep(NA,n), 
                      genres = rep(NA,n), episodes = rep(NA,n), 
                      keywords = rep(NA,n)
  )
top_n_shows
```

```
## # A tibble: 5 x 5
##   title runtime genres episodes keywords
##   &lt;lgl&gt; &lt;lgl&gt;   &lt;lgl&gt;  &lt;lgl&gt;    &lt;lgl&gt;   
## 1 NA    NA      NA     NA       NA      
## 2 NA    NA      NA     NA       NA      
## 3 NA    NA      NA     NA       NA      
## 4 NA    NA      NA     NA       NA      
## 5 NA    NA      NA     NA       NA
```

---

## `for` loop: 

### (2) Iterate through urls to scrape data and save results


```r
for (i in 1:n){
  top_n_shows[i, ] = scrape_show_info(urls[i])
}

top_n_shows
```

```
## # A tibble: 5 x 5
##   title      runtime genres            episodes keywords                  
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;                     
## 1 The Walkiâ€¦ 44min   Drama, Horror, Sâ€¦      131 zombie, survival, post apâ€¦
## 2 Big Mouth  30min   Animation, Comedâ€¦       20 sexual humor, adolescent â€¦
## 3 American â€¦ 1h      Drama, Horror, Tâ€¦       98 anthology, serial killer,â€¦
## 4 Ã‰lite      1h      Crime, Drama, Thâ€¦        8 gay character, hiv positiâ€¦
## 5 Doctor Who 45min   Adventure, Dramaâ€¦      178 time travel, time machineâ€¦
```

---

## `map`ping

- `map` functions transform their input by applying a function to each element and returning an object the same length as the input

--
- There are various map functions (e.g. `map_lgl()`, `map_chr()`, `map_dbl()`, `map_df()`), each of which return a different type of object (logical, character, double, and data frame, respectively)

--
- `map` the `scrape_show_info` function to each element of `urls`

--
- This will hit the `urls` one after another, and grab the info

**Goal:** Scrape info from individual pages of TV shows using functional 
programming with mapping. To keep things simple while developing the code, 
narrow down focus to the first `n = 5` shows only.

---

## `map`ping: 


```r
top_n_shows &lt;- map_df(urls[1:n], scrape_show_info)
top_n_shows
```

```
## # A tibble: 5 x 5
##   title      runtime genres            episodes keywords                  
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;                     
## 1 The Walkiâ€¦ 44min   Drama, Horror, Sâ€¦      131 zombie, survival, post apâ€¦
## 2 Big Mouth  30min   Animation, Comedâ€¦       20 sexual humor, adolescent â€¦
## 3 American â€¦ 1h      Drama, Horror, Tâ€¦       98 anthology, serial killer,â€¦
## 4 Ã‰lite      1h      Crime, Drama, Thâ€¦        8 gay character, hiv positiâ€¦
## 5 Doctor Who 45min   Adventure, Dramaâ€¦      178 time travel, time machineâ€¦
```

---

## Slow your roll

- If you get `HTTP Error 429 (Too man requests)` you might want to slow down your hits
- You can add a `Sys.sleep()` call to slow down your function:


```r
scrape_show_info &lt;- function(x){

* Sys.sleep(runif(1))
  
  ...

}
```
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"highlightStyle": "solarized-dark",
"countIncrementalSlides": false,
"mathjax": "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
